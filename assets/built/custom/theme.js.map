{"version":3,"file":"theme.js","sources":["theme.js"],"sourcesContent":["// Dark mode toggle\r\n\r\n(function () {\r\n    var theme = localStorage.getItem('theme');\r\n    if (theme === 'dark') {\r\n        document.documentElement.setAttribute('color-mode', 'dark');\r\n        document.documentElement.classList.add('dark-mode');\r\n        if (window.hyvor_talk) {\r\n            window.hyvor_talk.setPalette(darkPalette);\r\n        }\r\n        setTimeout (function() {\r\n            var tweets = document.querySelectorAll('[data-tweet-id]');\r\n            tweets.forEach(function(tweet) {\r\n                var src = tweet.getAttribute('src');\r\n                tweet.setAttribute('src', src.replace('theme=light', 'theme=dark'));\r\n            });\r\n        }, 1000);\r\n    } else {\r\n        document.documentElement.setAttribute('color-mode', 'light');\r\n        document.documentElement.classList.remove('dark-mode');\r\n        if (window.hyvor_talk) {\r\n            window.hyvor_talk.setPalette(lightPalette);\r\n        }\r\n        var tweets = document.querySelectorAll('[data-tweet-id]');\r\n        tweets.forEach(function (tweet) {\r\n            var src = tweet.getAttribute('src');\r\n            tweet.setAttribute('src', src.replace('theme=dark', 'theme=light'));\r\n        });\r\n    }\r\n})();\r\n\r\nvar toggleColorMode = function toggleColorMode(e) {\r\n    if (e.currentTarget.classList.contains('light--hidden')) {\r\n        document.documentElement.setAttribute('color-mode', 'light');\r\n        document.documentElement.classList.remove('dark-mode');\r\n        localStorage.setItem('theme', 'light');\r\n        if (window.hyvor_talk) {\r\n            window.hyvor_talk.setPalette(lightPalette);\r\n        }\r\n        var tweets = document.querySelectorAll('[data-tweet-id]');\r\n        tweets.forEach(function (tweet) {\r\n            var src = tweet.getAttribute('src');\r\n            tweet.setAttribute('src', src.replace('theme=dark', 'theme=light'));\r\n        });\r\n    } else {\r\n        document.documentElement.setAttribute('color-mode', 'dark');\r\n        document.documentElement.classList.add('dark-mode');\r\n        localStorage.setItem('theme', 'dark');\r\n        if (window.hyvor_talk) {\r\n            window.hyvor_talk.setPalette(darkPalette);\r\n        }\r\n        var tweets = document.querySelectorAll('[data-tweet-id]');\r\n        tweets.forEach(function (tweet) {\r\n            var src = tweet.getAttribute('src');\r\n            tweet.setAttribute('src', src.replace('theme=light', 'theme=dark'));\r\n        });\r\n    }\r\n};\r\n\r\nvar toggleColorButtons = document.querySelectorAll('.color-mode-btn');\r\n\r\ntoggleColorButtons.forEach(function (btn) {\r\n    btn.addEventListener('click', toggleColorMode);\r\n});\r\n\r\n// Progress bar\r\n\r\nconst readingProgress = (contentArea, progressBar) => {\r\n    const content = document.querySelector(contentArea);\r\n    const progress = document.querySelector(progressBar);\r\n\r\n    const frameListening = () => {\r\n        const contentBox = content.getBoundingClientRect();\r\n        const midPoint = window.innerHeight / 2;\r\n\r\n        if (contentBox.top > midPoint) {\r\n            progress.value = 0;\r\n        }\r\n\r\n        if (contentBox.top < midPoint) {\r\n            progress.value = progress.max;\r\n        }\r\n\r\n        if (contentBox.top <= midPoint && contentBox.bottom >= midPoint) {\r\n            progress.value =\r\n                (progress.max * Math.abs(contentBox.top - midPoint)) /\r\n                contentBox.height;\r\n        }\r\n\r\n        window.requestAnimationFrame(frameListening);\r\n    };\r\n\r\n    window.requestAnimationFrame(frameListening);\r\n};\r\n\r\nreadingProgress(\".gh-content\", \".reading-progress-bar\");\r\n\r\n/*\r\n * Published time for a post is formatted to a custom format in two places\r\n * 1. Byline on a post page\r\n * 2. Byline on the post preview card on the home page, author page, tag page, etc.\r\n*/\r\n\r\n$(document).ready(function () {\r\n    $('.byline-meta-date').each(function (i, date) {\r\n        var $date = $(date);\r\n\r\n        $date.html(moment.unix($date.attr('datetime')).format('MMMM D, YYYY [at] h:mm a'));\r\n    });\r\n});\r\n\r\n$(document).ready(function () {\r\n    $('.post-card-meta-date').each(function (i, time) {\r\n        var $time = $(time);\r\n\r\n        $time.html(moment.unix($time.attr('datetime')).format('MMM D, YYYY [@] h:mm a'));\r\n    });\r\n});\r\n"],"names":["localStorage","getItem","document","documentElement","setAttribute","classList","add","window","hyvor_talk","setPalette","darkPalette","setTimeout","querySelectorAll","forEach","tweet","src","getAttribute","replace","remove","lightPalette","toggleColorMode","e","currentTarget","contains","setItem","toggleColorButtons","btn","addEventListener","readingProgress","contentArea","progressBar","content","querySelector","progress","frameListening","contentBox","getBoundingClientRect","midPoint","innerHeight","top","value","max","bottom","Math","abs","height","requestAnimationFrame","$","ready","each","i","date","$date","html","moment","unix","attr","format","time","$time"],"mappings":"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"}